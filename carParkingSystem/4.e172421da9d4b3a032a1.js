(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{pBHI:function(t,e,r){"use strict";r.r(e),r.d(e,"homePageRoutes",function(){return P}),r.d(e,"HomeModule",function(){return N});var o=r("ofXK"),n=r("3Pt+"),a=r("tyNb");class s{static convertToLocalCars(t,e){const r=[];for(let o=1;o<=e;o++){const e=o%5,n=Object.assign({},t.data[e]);n.slotNo=0==e?"5":o.toString(),r.push(n)}return r}static isDetailsValid(t,e){return isNaN(t)||isNaN(e)||t<1||e<0?(alert("Please provide valid details"),!1):e>t?(alert("Cars parked cannot be greater than parking slots"),!1):!(t>9999999&&(alert("Currently parking slots greater than 9999999 is not supported"),1))}}var i=r("fXoL");let l=(()=>{class t{constructor(t,e){this.router=t,this.route=e,this.totalParkingSlots="5",this.noOfCarsParked="2"}ngOnInit(){}onSubmit(){let t=this.getParsedValues(this.totalParkingSlots),e=this.getParsedValues(this.noOfCarsParked);s.isDetailsValid(t,e)&&this.router.navigate(["details"],{queryParams:{totalSlot:t,parkedCars:e},relativeTo:this.route})}getParsedValues(t){return parseInt(t,10)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(a.b),i.Ib(a.a))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-home"]],decls:16,vars:2,consts:[[1,"container-fluid"],[1,"row","m-2","justify-content-center","align-items-center"],[1,"col-md-6"],[1,"col-12","mb-2"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","justify-content-center"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Mb(2,"div",2),i.Mb(3,"div",3),i.Mb(4,"strong"),i.hc(5,"No of parking places"),i.Lb(),i.Lb(),i.Mb(6,"div",3),i.Mb(7,"input",4),i.Tb("ngModelChange",function(t){return e.totalParkingSlots=t}),i.Lb(),i.Lb(),i.Mb(8,"div",3),i.Mb(9,"strong"),i.hc(10,"No of cars parked"),i.Lb(),i.Lb(),i.Mb(11,"div",3),i.Mb(12,"input",4),i.Tb("ngModelChange",function(t){return e.noOfCarsParked=t}),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(13,"div",5),i.Mb(14,"button",6),i.Tb("click",function(){return e.onSubmit()}),i.hc(15,"Submit"),i.Lb(),i.Lb(),i.Lb()),2&t&&(i.yb(7),i.Yb("ngModel",e.totalParkingSlots),i.yb(5),i.Yb("ngModel",e.noOfCarsParked))},directives:[n.a,n.c,n.d],styles:[""]}),t})();class c{constructor(){this.carNumber="",this.color="",this.slotNo="",this.date=""}}var b=r("tk/3");let d=(()=>{class t{constructor(t){this.http=t}fetchParkedCars(){return this.http.get("./assets/parking-details.json").toPromise()}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(b.a))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();function h(t,e){if(1&t){const t=i.Nb();i.Mb(0,"tr"),i.Mb(1,"td"),i.hc(2),i.Lb(),i.Mb(3,"td"),i.hc(4),i.Lb(),i.Mb(5,"td",2),i.hc(6),i.Lb(),i.Mb(7,"td",2),i.hc(8),i.Lb(),i.Mb(9,"td",2),i.hc(10),i.Wb(11,"date"),i.Lb(),i.Mb(12,"td",2),i.Mb(13,"button",5),i.Tb("click",function(){i.cc(t);const r=e.$implicit;return i.Vb().removeCar(r)}),i.hc(14,"Remove"),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=e.$implicit,r=e.index;i.yb(2),i.ic(r+1),i.yb(2),i.ic(t.carNumber),i.yb(2),i.ic(t.color),i.yb(2),i.ic(t.slotNo),i.yb(2),i.ic(i.Xb(11,5,t.date,"medium"))}}function u(t,e){1&t&&(i.Mb(0,"p",6),i.hc(1,"No cars found "),i.Lb())}let p=(()=>{class t{constructor(){this.tableValue=[],this.removeSelected=new i.n}removeCar(t){this.removeSelected.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["app-parking-table"]],inputs:{tableValue:["parkedCars","tableValue"]},outputs:{removeSelected:"removeSelected"},decls:18,vars:2,consts:[[1,"table-responsive"],["id","parkedCarDetails","cellspacing","0","width","100%",1,"table","table-bordered"],[1,"center"],[4,"ngFor","ngForOf"],["class","center m-2",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"center","m-2"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"table",1),i.Mb(2,"thead"),i.Mb(3,"tr"),i.Mb(4,"th"),i.hc(5,"#"),i.Lb(),i.Mb(6,"th"),i.hc(7,"Car No"),i.Lb(),i.Mb(8,"th",2),i.hc(9,"Color"),i.Lb(),i.Mb(10,"th",2),i.hc(11,"Slot No."),i.Lb(),i.Mb(12,"th",2),i.hc(13,"Date-Time "),i.Lb(),i.Jb(14,"th"),i.Lb(),i.Lb(),i.Mb(15,"tbody"),i.fc(16,h,15,8,"tr",3),i.fc(17,u,2,0,"p",4),i.Lb(),i.Lb(),i.Lb()),2&t&&(i.yb(16),i.Yb("ngForOf",e.tableValue),i.yb(1),i.Yb("ngIf",e.tableValue.length<1))},directives:[o.j,o.k],pipes:[o.d],styles:["thead[_ngcontent-%COMP%]{background-color:#505459;border-color:#505459;color:#fff}td.center[_ngcontent-%COMP%], th.center[_ngcontent-%COMP%], tr.center[_ngcontent-%COMP%]{text-align:center}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #d3d3d3}"]}),t})();function g(t,e){1&t&&i.Kb(0)}const C=function(t){return["alert","alert-dismissible","fade","show",t]};function f(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",27),i.fc(1,g,1,0,"ng-container",28),i.Mb(2,"button",29),i.Tb("click",function(){return i.cc(t),i.Vb().closeAlert()}),i.Mb(3,"span",30),i.hc(4,"\xd7"),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb(),e=i.bc(47),r=i.bc(45);i.Yb("ngClass",i.Zb(4,C,"ADD"==t.lastOperation?"alert-success":"alert-warning")),i.yb(1),i.Yb("ngIf","ADD"==t.lastOperation)("ngIfThen",e)("ngIfElse",r)}}function m(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",16),i.Mb(1,"input",31),i.Tb("ngModelChange",function(e){return i.cc(t),i.Vb().newCarRegNo=e}),i.Lb(),i.Lb()}if(2&t){const t=i.Vb();i.yb(1),i.Yb("ngModel",t.newCarRegNo)}}function M(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",16),i.Mb(1,"input",32),i.Tb("ngModelChange",function(e){return i.cc(t),i.Vb().newCarColor=e}),i.Lb(),i.Lb()}if(2&t){const t=i.Vb();i.yb(1),i.Yb("ngModel",t.newCarColor)}}function k(t,e){if(1&t){const t=i.Nb();i.Mb(0,"a",33),i.Tb("click",function(){i.cc(t);const r=e.$implicit;return i.Vb().updateColor(r)}),i.hc(1),i.Lb()}if(2&t){const t=e.$implicit;i.yb(1),i.ic(t)}}function v(t,e){if(1&t&&(i.Mb(0,"strong"),i.hc(1),i.Lb(),i.hc(2," Collected Rs.20\n")),2&t){const t=i.Vb();i.yb(1),i.kc("Slot ",t.selectedCar.slotNo," occupied by ",t.selectedCar.carNumber," has been freed !!!")}}function L(t,e){if(1&t&&(i.hc(0," Successfully parked the car "),i.Mb(1,"strong"),i.hc(2),i.Lb(),i.hc(3," in slot "),i.Mb(4,"strong"),i.hc(5),i.Lb(),i.hc(6," !!\n")),2&t){const t=i.Vb();i.yb(2),i.ic(t.selectedCar.carNumber),i.yb(3),i.ic(t.selectedCar.slotNo)}}const y="Choose color",P=[{path:"",component:l,pathMatch:"full"},{path:"details",component:(()=>{class t{constructor(t,e,r){this.route=t,this.service=e,this.router=r,this.noOfCarsParked=0,this.amountCollected=0,this.totalParkingSlots=1,this.availableSlots=1,this.selectedColor=y,this.selectedRegNo="",this.newCarRegNo="",this.newCarColor="",this.lastOperation="",this.parkedCarColors=[],this.selectedCar=new c,this.parkedCars=[],this.parkedCarsClone=[],this.numberPlateRegex=/^[A-Z]{2}[-][0-9]{1,2}[-][A-Z]{1,2}[-][0-9]{3,4}$/}ngOnInit(){this.route.queryParams.subscribe(t=>{this.totalParkingSlots=+t.totalSlot,this.noOfCarsParked=+t.parkedCars,this.validateRouteParams()})}validateRouteParams(){s.isDetailsValid(this.totalParkingSlots,this.noOfCarsParked)?this.updateCarDetails():this.router.navigate(["home"])}updateCarDetails(){this.availableSlots=this.totalParkingSlots-this.noOfCarsParked,this.service.fetchParkedCars().then(t=>{this.parkedCars=s.convertToLocalCars(t,this.noOfCarsParked),this.parkedCarsClone=[...this.parkedCars]})}addNewCar(){if(!this.isCarDetailsValid())return;const t=this.getNewCarDetail();this.parkedCars.push(t),this.parkedCarsClone.push(t),this.newCarRegNo=this.newCarColor="",this.selectedCar=t,this.lastOperation="ADD",this.decrementAvailableSlot(),this.filterCars()}isCarDetailsValid(){return this.newCarRegNo&&this.newCarColor?!!this.numberPlateRegex.test(this.newCarRegNo.toUpperCase().trim())||(alert("Car number is not valid,It should be in format KA-00-AZ-0000 "),!1):(alert("Provide car number and color"),!1)}getNewCarDetail(){const t=new c;return t.carNumber=this.newCarRegNo.toUpperCase().trim(),t.color=this.newCarColor=this.newCarColor.charAt(0).toUpperCase()+this.newCarColor.slice(1),t.date=(new Date).toString(),t.slotNo=this.getAvailableSlotNumber(),t}getAvailableSlotNumber(){const t=this.parkedCarsClone.map(t=>t.slotNo);let e=1;for(;e<=this.totalParkingSlots&&t.find(t=>t==e.toString());)e++;return e.toString()}decrementAvailableSlot(){this.availableSlots-=1}filterCars(){let t=[...this.parkedCarsClone];this.selectedRegNo&&(t=t.filter(t=>t.carNumber==this.selectedRegNo)),""!=this.selectedColor&&this.selectedColor!=y&&(t=t.filter(t=>t.color==this.selectedColor)),this.parkedCars=t}removeCar(t){this.parkedCars=this.parkedCars.filter(e=>e!=t),this.parkedCarsClone=this.parkedCarsClone.filter(e=>e.slotNo!=t.slotNo),this.amountCollected+=20,this.selectedCar=t,this.lastOperation="REMOVE",this.incrementAvailableSlot()}incrementAvailableSlot(){this.availableSlots+=1}updateColor(t){this.selectedColor=t}closeAlert(){this.lastOperation=""}resetFilterSearch(){this.selectedColor="",this.selectedRegNo="",this.parkedCars=[...this.parkedCarsClone]}query(){this.amountCollected=0,this.selectedColor="",this.selectedRegNo="",this.lastOperation="",this.updateCarDetails()}updateColorOptions(){this.parkedCarColors=[y,...this.getParkedCarColors()]}getParkedCarColors(){let t=this.parkedCarsClone;this.selectedRegNo&&(t=this.parkedCarsClone.filter(t=>t.carNumber==this.selectedRegNo));const e=t.map(t=>t.color);return e.filter((t,r)=>e.indexOf(t)==r)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(a.a),i.Ib(d),i.Ib(a.b))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-parking"]],decls:48,vars:12,consts:[[1,"header"],[1,"d-flex","align-items-center","justify-content-center"],[1,"title"],[1,"amount"],["style","text-align: center;","role","alert",3,"ngClass",4,"ngIf"],[1,"container-fluid"],[1,"row","mt-4"],[1,"col-md-4"],[1,"col-12"],[1,"text-danger","ml-1"],[1,"col-md-8"],[1,"row","align-items-center","justify-content-md-end"],["class","mr-2 mb-2",4,"ngIf"],["type","button",1,"btn","btn-danger","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-success","mr-2",3,"click"],[1,"row","justify-content-md-end","mt-4"],[1,"mr-2","mb-2"],["type","text","placeholder","TYPE REG NO.",1,"form-control",3,"ngModel","ngModelChange"],[1,"dropdown","mr-2"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle",3,"click"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info","mr-2",3,"click"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"],[3,"parkedCars","removeSelected"],["removeMsgBlock",""],["addMsgBlock",""],["role","alert",2,"text-align","center",3,"ngClass"],[4,"ngIf","ngIfThen","ngIfElse"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","KA-00-AZ-0000",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter color",1,"form-control",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],[1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(i.Mb(0,"nav",0),i.Mb(1,"div",1),i.Mb(2,"div",2),i.hc(3,"Automated Parking Lot System"),i.Lb(),i.Mb(4,"div",3),i.hc(5),i.Lb(),i.Lb(),i.Lb(),i.fc(6,f,5,6,"div",4),i.Mb(7,"div",5),i.Mb(8,"div",6),i.Mb(9,"div",7),i.Mb(10,"div",8),i.Mb(11,"label"),i.hc(12,"Total Parking Slots- "),i.Mb(13,"span",9),i.hc(14),i.Lb(),i.Lb(),i.Lb(),i.Mb(15,"div",8),i.Mb(16,"label"),i.hc(17,"Available Parking Slots-"),i.Mb(18,"span",9),i.hc(19),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(20,"div",10),i.Mb(21,"div",11),i.fc(22,m,2,1,"div",12),i.fc(23,M,2,1,"div",12),i.Mb(24,"button",13),i.Tb("click",function(){return e.addNewCar()}),i.hc(25),i.Lb(),i.Mb(26,"button",14),i.Tb("click",function(){return e.query()}),i.hc(27,"Query Data"),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(28,"div",15),i.Mb(29,"div",16),i.Mb(30,"input",17),i.Tb("ngModelChange",function(t){return e.selectedRegNo=t}),i.Lb(),i.Lb(),i.Mb(31,"div",18),i.Mb(32,"button",19),i.Tb("click",function(){return e.updateColorOptions()}),i.hc(33),i.Lb(),i.Mb(34,"div",20),i.fc(35,k,2,1,"a",21),i.Lb(),i.Lb(),i.Mb(36,"div"),i.Mb(37,"button",22),i.Tb("click",function(){return e.filterCars()}),i.hc(38,"Search"),i.Lb(),i.Mb(39,"button",23),i.Tb("click",function(){return e.resetFilterSearch()}),i.hc(40,"Reset"),i.Lb(),i.Lb(),i.Lb(),i.Mb(41,"div",6),i.Mb(42,"div",8),i.Mb(43,"app-parking-table",24),i.Tb("removeSelected",function(t){return e.removeCar(t)}),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.fc(44,v,3,2,"ng-template",null,25,i.gc),i.fc(46,L,7,2,"ng-template",null,26,i.gc)),2&t&&(i.yb(5),i.jc("Total Amount Rs.",e.amountCollected," "),i.yb(1),i.Yb("ngIf",""!=e.lastOperation&&e.selectedCar),i.yb(8),i.ic(e.totalParkingSlots),i.yb(5),i.ic(e.availableSlots),i.yb(3),i.Yb("ngIf",e.availableSlots>0),i.yb(1),i.Yb("ngIf",e.availableSlots>0),i.yb(1),i.Yb("disabled",e.availableSlots<1),i.yb(1),i.jc("",e.availableSlots>0?"Park a car":"Parking Full"," "),i.yb(5),i.Yb("ngModel",e.selectedRegNo),i.yb(3),i.jc(" ",e.selectedColor," "),i.yb(2),i.Yb("ngForOf",e.parkedCarColors),i.yb(8),i.Yb("parkedCars",e.parkedCars))},directives:[o.k,n.a,n.c,n.d,o.j,p,o.i],styles:[".header[_ngcontent-%COMP%]{margin:0;background-color:#368f8b;color:#fff;position:sticky;width:100%;text-align:center}.title[_ngcontent-%COMP%]{padding:15px;font-size:x-large}.amount[_ngcontent-%COMP%]{position:absolute;font-size:large;right:15px}.dropdown-toggle[_ngcontent-%COMP%]{border:1px solid #d3d3d3}"]}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({providers:[d],imports:[[o.b,n.b,a.c.forChild(P)]]}),t})()}}]);